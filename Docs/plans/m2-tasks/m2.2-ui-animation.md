---
title: "M2.2 UI 애니메이션"
type: feat
date: 2026-01-27
milestone: M2
task_id: M2.2
depends_on: [M1]
scripts: 5
---

# M2.2: UI 애니메이션

## 목표

UI 요소들에 애니메이션을 적용하여 반응성과 시각적 피드백을 강화합니다.
목재 카운터, 업그레이드 버튼, 플로팅 텍스트, 패널 전환 등을 개선합니다.

## 의존성

- **M1**: 프로토타입 완료 필수 (기존 UI 컴포넌트 존재)

## 구현할 스크립트

### 1. WoodCounterAnimator.cs

```
Assets/02.Scripts/UI/WoodCounterAnimator.cs
```

**역할:** 목재 카운터 애니메이션

**주요 기능:**
- 숫자 증가 시 펀치 효과 (스케일 변화)
- 색상 변화 (획득량에 따라)
- 숫자 롤링 효과 (부드러운 증가)

**인터페이스:**
```csharp
public class WoodCounterAnimator : MonoBehaviour
{
    [SerializeField] private float _punchScale = 1.2f;
    [SerializeField] private float _punchDuration = 0.1f;
    [SerializeField] private Color _normalColor = Color.white;
    [SerializeField] private Color _gainColor = Color.yellow;

    public void PlayGainAnimation(long amount);
    public void PlayMilestoneAnimation();  // 1K, 1M 도달 시
}
```

**애니메이션 동작:**
1. 목재 획득 시:
   - 스케일: 1.0 → 1.2 → 1.0 (0.1초)
   - 색상: 노란색 → 흰색 (0.2초)
2. 마일스톤 도달 시:
   - 더 큰 펀치 효과
   - 파티클 효과 추가

### 2. UpgradeButtonAnimator.cs

```
Assets/02.Scripts/UI/UpgradeButtonAnimator.cs
```

**역할:** 업그레이드 버튼 애니메이션

**주요 기능:**
- 구매 가능 시 펄스 효과
- 구매 성공 시 피드백
- 구매 불가 시 흔들림 (Shake)
- 호버 효과

**인터페이스:**
```csharp
public class UpgradeButtonAnimator : MonoBehaviour
{
    public void StartPulseAnimation();   // 구매 가능할 때 루프
    public void StopPulseAnimation();    // 구매 불가능할 때
    public void PlayPurchaseAnimation(); // 구매 성공
    public void PlayDeniedAnimation();   // 구매 실패 (재화 부족)
}
```

**애니메이션 동작:**
1. 펄스 (구매 가능):
   - 스케일: 1.0 → 1.05 → 1.0 (0.5초 루프)
   - 미묘한 글로우 효과
2. 구매 성공:
   - 스케일: 1.0 → 1.3 → 1.0 (0.2초)
   - 초록색 플래시
3. 구매 실패:
   - X축 흔들림 (0.1초)
   - 빨간색 플래시

### 3. FloatingTextAnimator.cs

```
Assets/02.Scripts/UI/FloatingTextAnimator.cs
```

**역할:** 플로팅 텍스트 연출 강화

**주요 기능:**
- 크리티컬 전용 스타일
- 애니메이션 곡선 커스터마이징
- 텍스트 이펙트 (아웃라인, 그림자)

**인터페이스:**
```csharp
public class FloatingTextAnimator : MonoBehaviour
{
    [SerializeField] private AnimationCurve _moveCurve;
    [SerializeField] private AnimationCurve _scaleCurve;
    [SerializeField] private AnimationCurve _alphaCurve;

    public void SetNormalStyle();
    public void SetCriticalStyle();
    public void SetBonusStyle();
}
```

**스타일:**
| 스타일 | 크기 | 색상 | 이동 거리 |
|--------|------|------|-----------|
| Normal | 24pt | 흰색 | 50px |
| Critical | 36pt | 노란색+아웃라인 | 80px |
| Bonus | 28pt | 초록색 | 60px |

### 4. PanelTransition.cs

```
Assets/02.Scripts/UI/PanelTransition.cs
```

**역할:** UI 패널 전환 애니메이션

**주요 기능:**
- 슬라이드 인/아웃
- 페이드 인/아웃
- 스케일 팝업
- 백드롭 어둡게

**인터페이스:**
```csharp
public class PanelTransition : MonoBehaviour
{
    public enum TransitionType
    {
        SlideFromRight,
        SlideFromBottom,
        ScalePopup,
        Fade
    }

    [SerializeField] private TransitionType _openTransition;
    [SerializeField] private TransitionType _closeTransition;
    [SerializeField] private float _duration = 0.3f;
    [SerializeField] private CanvasGroup _backdrop;

    public void Open();
    public void Close();
    public event Action OnOpenComplete;
    public event Action OnCloseComplete;
}
```

### 5. ToastMessage.cs

```
Assets/02.Scripts/UI/ToastMessage.cs
```

**역할:** 토스트 메시지 시스템

**주요 기능:**
- 하단에서 슬라이드 업
- 자동 페이드 아웃
- 큐 시스템 (연속 메시지 처리)
- 아이콘 지원

**인터페이스:**
```csharp
public class ToastMessage : MonoBehaviour
{
    public enum ToastType
    {
        Info,
        Success,
        Warning,
        Error
    }

    public static void Show(string message, ToastType type = ToastType.Info);
    public static void Show(string message, Sprite icon);
}
```

**동작:**
1. 메시지 표시 요청
2. 하단에서 슬라이드 업 (0.2초)
3. 2초간 유지
4. 페이드 아웃 (0.3초)
5. 다음 메시지 있으면 반복

## 기존 코드 수정

### WoodCounterUI.cs 수정

```csharp
public class WoodCounterUI : MonoBehaviour
{
    private WoodCounterAnimator _animator;

    private void Start()
    {
        _animator = GetComponent<WoodCounterAnimator>();
        GameEvents.OnWoodChanged += HandleWoodChanged;
    }

    private void HandleWoodChanged(long newAmount)
    {
        UpdateDisplay(newAmount);
        _animator?.PlayGainAnimation(newAmount - _previousAmount);
        _previousAmount = newAmount;
    }
}
```

### UpgradeButtonUI.cs 수정

```csharp
public class UpgradeButtonUI : MonoBehaviour
{
    private UpgradeButtonAnimator _animator;

    private void UpdateAffordability()
    {
        bool canAfford = CanAfford();
        if (canAfford)
            _animator?.StartPulseAnimation();
        else
            _animator?.StopPulseAnimation();
    }

    private void TryPurchase()
    {
        if (CanAfford())
        {
            Purchase();
            _animator?.PlayPurchaseAnimation();
        }
        else
        {
            _animator?.PlayDeniedAnimation();
        }
    }
}
```

## 체크리스트

### 구현

- [ ] WoodCounterAnimator 구현
- [ ] UpgradeButtonAnimator 구현
- [ ] FloatingTextAnimator 구현
- [ ] PanelTransition 구현
- [ ] ToastMessage 시스템 구현

### 연동

- [ ] WoodCounterUI에 애니메이션 연동
- [ ] UpgradeButtonUI에 애니메이션 연동
- [ ] FloatingText에 스타일 시스템 연동
- [ ] UpgradePanelUI에 전환 애니메이션 연동

### 테스트

- [ ] 펀치 효과 자연스러움 확인
- [ ] 패널 전환 부드러움 확인
- [ ] 토스트 메시지 큐 동작 확인
- [ ] 성능 테스트 (다수 애니메이션 동시)

## 애니메이션 라이브러리

### DOTween 사용 권장

```csharp
// 펀치 스케일
transform.DOPunchScale(Vector3.one * 0.2f, 0.1f);

// 색상 변화
image.DOColor(Color.yellow, 0.1f).OnComplete(() =>
    image.DOColor(Color.white, 0.2f));

// 슬라이드
rectTransform.DOAnchorPosX(0, 0.3f).SetEase(Ease.OutQuad);
```

### DOTween 없을 경우

Coroutine + AnimationCurve 조합으로 대체 가능

## 폴더 구조

```
Assets/
├── 02.Scripts/
│   └── UI/
│       ├── WoodCounterAnimator.cs
│       ├── UpgradeButtonAnimator.cs
│       ├── FloatingTextAnimator.cs
│       ├── PanelTransition.cs
│       └── ToastMessage.cs
└── Prefabs/
    └── UI/
        └── ToastMessage.prefab
```

## 다음 단계

M2.2 완료 후:
→ M2.4 통합 테스트에서 전체 UI 피드백 검증
